/*******************************************************************************
* タイトル:		タイトルプログラム
* プログラム名:	Title.cpp
* 作成者:		GP11A112 17 鍾政殷
* 作成日:		2021/06/11
*******************************************************************************/



/*******************************************************************************
* インクルードファイル
*******************************************************************************/
#include "main.h"
#include "Title.h"
#include "Player.h"
#include "Field.h"

/*******************************************************************************
* マクロ定義
*******************************************************************************/


/*******************************************************************************
* 構造体定義
*******************************************************************************/


/*******************************************************************************
* プロトタイプ宣言
*******************************************************************************/


/*******************************************************************************
* グローバル変数
*******************************************************************************/
CAMERA camera;

// タイトル用
int title[t_HEIGHT][t_WIDTH] =
{
  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 6, 6, 6, 6, 6,
  2, 0, 2, 0, 0, 2, 0, 0, 2, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 6, 6, 6, 6,
  2, 0, 2, 0, 0, 3, 0, 0, 3, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 6, 6, 6, 6,
  2, 0, 2, 0, 0, 4, 0, 0, 4, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 6, 6, 6, 6, 6,
  2, 0, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 7, 0, 1, 1, 1, 6, 6, 6, 6, 6,
  2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 0, 0, 0, 0, 6, 6, 6, 6, 6,
  2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 80, 81, 82, 83, 84, 85, 86, 0, 87, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 6, 6, 6, 6, 6,
  2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 88, 89, 90, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 6, 6, 6, 6, 6,
  2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8, 8, 0, 0, 0, 6, 6, 6, 6, 6,
  5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6,

  2, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 6, 6, 6, 6, 6,
  5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6,

};																														  


/*******************************************************************************
 関数名:	
 引数　:	
 戻り値:	
 説明　:	
*******************************************************************************/

//タイトル
//　タイトルの初期化
void InitTitle(void) {
	camera.X = 2;
}
// タイトルの終了処理
void UninitTitle(void) {

}
// タイトルの更新処理
void UpdateTitle(void) {
	//　アニメーションカウンターを進める
	

	UpdatePlayer();
	
	// モード切り替え

	// SetMode(GAME_FIELD); // フィールドへ遷移

}
// タイトルの描画処理
void DrawTitle(void) {
	PLAYER* player = GetPlayer();
	printf("\n     ");
	for (int y = 0; y < t_HEIGHT; y++) {
		// 1行表示
		for (int x = 0; x < player->x + t_rPOV + camera.X; x++) {
			if (x == player->x && y == player->y) {
				// Pを表示
				DrawPlayer();
			}
			else
			{
				switch (title[y][x]) {
				case 0: // 通れる
					printf(" ");
					break;
				case 1: // 床
					printf("=");
					break;
				case 2: // ヒント1
					printf("|");
					break;
				case 3: // ヒント2
					printf("v");
					break; // FOV拡大
				case 4: // 下層床
					printf("X");
					break;
				case 5: // 下層床
					printf("-");
					break;
				case 6:
					printf(" ");
					break;
				case 7:
					printf(" "); // TODO: G -> S
					break;
				default: // エラー検知
					printf(" ");
					break;

					// 文字出力
				case 80:
					printf("ネ");
					break;
				case 81:
					printf("ク");
					break;
				case 82:
					printf("ロ");
					break;
				case 83:
					printf("マ");
					break;
				case 84:
					printf("ン");
					break;
				case 85:
					printf("サ");
					break;
				case 86:
					printf("ー");
					break;
				case 87:
					printf("の");
					break;
				case 88:
					printf("逃");
					break;
				case 89:
					printf("走");
					break;
				case 90:
					printf("劇");
					break;
				}
				
			}
		}
		printf("\n"); // 次の行へ改行する
		printf("     ");
		
	}
	Sleep(200);
}



int GetTitleData(int y, int x)
{
	return title[y][x];
}

void SetTitleData(int y, int x, int num)
{
	title[y][x] = num;
}

CAMERA* GetCamera()
{
	return &camera;
}
